<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Обращение к серверу</title>
</head>

<body>
    <div style="padding: 20px; margin-bottom: 20px; border: 1px solid #ccc;">
        <h2>Получить всю информацию о пользователе</h2>
        <div>
            <label for="getfull_id">ID:</label>
            <input type="text" id="getfull_place" placeholder="Введите id" />
        </div>
        <div>
            <button id="getfullButton">получить информацию</button>
        </div>
    </div>

    <div style="padding: 20px; margin-bottom: 20px; border: 1px solid #ccc;">
        <h2>Получить базовую информацию о пользователе</h2>
        <div>
            <label for="getbase_id">ID:</label>
            <input type="text" id="getbase" placeholder="Введите id" />
        </div>
        <div>
            <button id="getbaseButton">получить информацию</button>
        </div>
    </div>

    <div style="padding: 20px; margin-bottom: 20px; border: 1px solid #ccc;">
        <h2>Получить список всех статей</h2>
        <div>
            <button id="AllArticles">получить</button>
        </div>
    </div>

    <div style="padding: 20px; margin-bottom: 20px; border: 1px solid #ccc;">
        <h2>Получить информацию о первой статье из списка</h2>
        <div>
            <label for="Article_id">ID:</label>
            <input type="text" id="Article_id_place" placeholder="Введите id" />
        </div>
        <div>
            <button id="GetArticleButton">получить</button>
        </div>
    </div>

    <script>

        const link = " https://9665-212-115-232-243.ngrok-free.app";

        //Получение полной информации о пользователе через ID
        document.getElementById('getfullButton').addEventListener('click', async () => {
            const ID = document.getElementById('getfull_place').value;

            if (!ID) {
                alert('Пожалуйста, заполните все поля!');
                return;
            }

            const response = await fetch(`${link}/api/users/${ID}/FullInfo`, {
                method: 'GET',
                headers: {
                    "ngrok-skip-browser-warning": "true"
                }
            });

            if (response.ok) {
                const data = await response.json();
                console.log(data); //Type, Email, Username, Name, Surname, Fathername, Phone, Photo, Resume
                alert('Информация полученя успешно');

            } else {
                const error = await response.text();
                alert(`Ошибка: ${error}`);
            }
        });


        //Получение базовой информации о пользователе через ID
        document.getElementById('getbaseButton').addEventListener('click', async () => {
            const ID = document.getElementById('getbase').value;

            if (!ID) {
                alert('Пожалуйста, заполните все поля!');
                return;
            }


            const response = await fetch(`${link}/api/users/${ID}/BaseInfo`, {
                method: 'GET',
                headers: {
                    "ngrok-skip-browser-warning": "true"
                }
            });



            if (response.ok) {
                const data = await response.json();
                console.log(data) //Type, Name, Surname, Fathername, Photo
                alert('Информация полученя успешно');

            } else {
                const error = await response.text();
                alert(`Ошибка: ${error}`);
            }
        });


        // Получение списка id всех статей из БД
        document.getElementById('AllArticles').addEventListener('click', async () => {

            const response = await fetch(`${link}/api/Articles/AllArticlesId`, {
                method: 'GET',
                headers: {
                    "ngrok-skip-browser-warning": "true"
                }
            });


            if (response.ok) {
                const data = await response.json();
                console.log(data) // Список айди long[]
                alert('Информация полученя успешно');

            } else {
                const error = await response.text();
                alert(`Ошибка: ${error}`);
            }
        });

        //Получение информации о конкретной статье по id
        document.getElementById('GetArticleButton').addEventListener('click', async () => {
            const ID = document.getElementById('Article_id_place').value;

            if (!ID) {
                alert('Пожалуйста, заполните все поля!');
                return;
            }


            const response = await fetch(`${link}/api/Articles/${ID}/Article`, {
                method: 'GET',
                headers: {
                    "ngrok-skip-browser-warning": "true"
                }
            });


            if (response.ok) {
                const data = await response.json();
                console.log(data)
                // article_file - файл html
                // article_photos - массив фото
                // article_title - заголовок
                // article_author_id - айди автора
                // article_first_paragraph - первый параграф для ленты
                // article_theme - тема
                // article_publishDate - дата публикации
                // article_views - просмотры
                // Пока не знаю как оно будет заполняться, поэтому учти что какие-то значения могут быть равны null

                alert('Информация полученя успешно');

            } else {
                const error = await response.text();
                alert(`Ошибка: ${error}`);
            }
        });
    </script>
</body>

</html>